/*! ng-stats 2.1.3 created by Kent C. Dodds | 2015-03-03 */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define(b):"undefined"!=typeof module&&module.exports?module.exports=b:a.showAngularStats=b()}(window,function(){"use strict";function a(){if(!z){z=!0;var a=d(),b=Object.getPrototypeOf(a),c=b.$digest;b.$digest=function(){var a=u();c.apply(this,arguments);var b=u()-a;i(e(),b)}}}function b(a){window.angular&&d()?c(a):window.setTimeout(function(){b(a)},200)}function c(b){function c(a,c,d){var e=a.charAt(0).toUpperCase()+a.slice(1);b["track"+e]&&(h[a]=[],c["track + capThingToTrack"]=function(b){d&&h[a][h.length-1]===b||(h[a][h.length-1]=b,h[a].push(b))})}function d(a,c,d){var f=a.charAt(0).toUpperCase()+a.slice(1);if(b["log"+f]){var g;c["log"+f]=function(b){if(!d||g!==b){g=b;var c=e(a,b);c?console.log("%c"+a+":",c,b):console.log(a+":",b)}}}}function e(a,c){var d;return"digest"===a&&(d=c>b.digestTimeThreshold?"color:red":"color:green"),d}function f(a,c){var d=c||y,e=d>b.digestTimeThreshold?"red":"green";if(x=j(a)?x:a,y=j(c)?y:c,m.text(x+" | "+y.toFixed(2)).css({color:e}),c){var f=o.getContext("2d");l>0&&(l=0,f.fillStyle="#333",f.fillRect(n.width-1,0,1,n.height)),f.fillStyle=e,f.fillRect(n.width-1,Math.max(0,n.height-d),2,2)}}function g(){if(i.active){window.setTimeout(g,250);var a=o.getContext("2d"),b=a.getImageData(1,0,n.width-1,n.height);a.putImageData(b,0,0),a.fillStyle=l++>2?"black":"#333",a.fillRect(n.width-1,0,1,n.height)}}b=b||{};var h={listeners:A};if(t&&(t.$el&&t.$el.remove(),t.active=!1,t=null),b===!1)return void sessionStorage.removeItem(s);b.position=b.position||"top-left",b=angular.extend({digestTimeThreshold:16,autoload:!1,trackDigest:!1,trackWatches:!1,logDigest:!1,logWatches:!1,styles:{position:"fixed",background:"black",borderBottom:"1px solid #666",borderRight:"1px solid #666",color:"red",fontFamily:"Courier",width:130,zIndex:9999,textAlign:"right",top:-1==b.position.indexOf("top")?null:0,bottom:-1==b.position.indexOf("bottom")?null:0,right:-1==b.position.indexOf("right")?null:0,left:-1==b.position.indexOf("left")?null:0}},b||{}),a();var i=t={active:!0};b.autoload?sessionStorage.setItem(s,JSON.stringify(b)):sessionStorage.removeItem(s);var k=angular.element(document.body),l=0;i.$el=angular.element("<div><canvas></canvas><div></div></div>").css(b.styles),k.append(i.$el);var m=i.$el.find("div"),n={width:130,height:40},o=i.$el.find("canvas").attr(n)[0];return A.digestLength.ngStatsAddToCanvas=function(a){f(null,a)},A.watchCount.ngStatsAddToCanvas=function(a){f(a)},c("digest",A.digestLength),c("watches",A.watchCount,!0),d("digest",A.digestLength),d("watches",A.watchCount,!0),g(),r.$$phase||r.$digest(),h}function d(){if(r)return r;var a=document.querySelector(".ng-scope");return a?r=angular.element(a).scope().$root:null}function e(){window.clearTimeout(w);var a=u();return a-v>300?(v=a,x=k()):w=window.setTimeout(function(){i(e())},350),x}function f(a){var b=g(a);return k(b)}function g(a){a=angular.element(a);var b=a.scope();return b||(a=angular.element(a.querySelector(".ng-scope")),b=a.scope()),b}function h(a){return a&&a.$$watchers?a.$$watchers:[]}function i(a,b){j(a)||angular.forEach(A.watchCount,function(b){b(a)}),j(b)||angular.forEach(A.digestLength,function(a){a(b)})}function j(a){return null===a||void 0===a}function k(a){var b=0;return l(a,function(a){b+=h(a).length}),b}function l(a,b){if("function"==typeof a&&(b=a,a=null),a=a||d(),a=p(a)){var c=b(a);return c===!1?c:n(a,b)}}function m(a,b){for(var c;(a=a.$$nextSibling)&&(c=b(a),c!==!1)&&(c=n(a,b),c!==!1););return c}function n(a,b){for(var c;(a=a.$$childHead)&&(c=b(a),c!==!1)&&(c=m(a,b),c!==!1););return c}function o(a){var b=null;return l(function(c){return c.$id===a?(b=c,!1):void 0}),b}function p(a){return q(a)&&(a=o(a)),a}function q(a){return"string"==typeof a||"number"==typeof a}var r,s="showAngularStats_autoload",t=null,u=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()},v=u(),w=null,x=e()||0,y=0,z=!1,A={watchCount:{},digestLength:{}},B=sessionStorage[s];return B&&b(JSON.parse(B)),angular.module("angularStats",[]).directive("angularStats",function(){function b(a){for(var b=a[0];b.parentElement;)b=b.parentElement;return b}var c=1;return{scope:{digestLength:"@",watchCount:"@",watchCountRoot:"@",onDigestLengthUpdate:"&?",onWatchCountUpdate:"&?"},link:function(d,e,g){a();var h=c++;if(g.hasOwnProperty("digestLength")){var i=e;g.digestLength&&(i=angular.element(e[0].querySelector(g.digestLength))),A.digestLength["ngStatsDirective"+h]=function(a){i.text((a||0).toFixed(2))}}if(g.hasOwnProperty("watchCount")){var j,k=e;if(d.watchCount&&(k=angular.element(e[0].querySelector(g.watchCount))),d.watchCountRoot)if("this"===d.watchCountRoot)j=e;else{var l;if(l=g.hasOwnProperty("watchCountOfChild")?e[0]:b(e),j=angular.element(l.querySelector(d.watchCountRoot)),!j.length)throw new Error("no element at selector: "+d.watchCountRoot)}A.watchCount["ngStatsDirective"+h]=function(a){var b=a;j&&(b=f(j)),k.text(b)}}d.onWatchCountUpdate&&(A.watchCount["ngStatsDirectiveUpdate"+h]=function(a){d.onWatchCountUpdate({watchCount:a})}),d.onDigestLengthUpdate&&(A.digestLength["ngStatsDirectiveUpdate"+h]=function(a){d.onDigestLengthUpdate({digestLength:a})}),d.$on("$destroy",function(){delete A.digestLength["ngStatsDirectiveUpdate"+h],delete A.watchCount["ngStatsDirectiveUpdate"+h],delete A.digestLength["ngStatsDirective"+h],delete A.watchCount["ngStatsDirective"+h]})}}}),c});